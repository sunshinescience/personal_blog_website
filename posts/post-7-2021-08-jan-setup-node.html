<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title> Page Title</title>
        <!--Using the viewport meta tag to control layout on mobile browsers -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--External link-->
        <link rel="stylesheet" type="text/CSS" href="../css/index.css">
    </head>
        <body>
            <div class="container">
                <div class="header box">
                    <!-- Create nested grid in header -->
                    <div class="nested-grid">
                        <p class="header-name" id="typography-1-name">Sunshine Abbott</p>
                        <div id="typography-2"> </div>
                        <div class="menu">
                            <a href="../index.html" id="typography-1">Portfolio</a>
                            <a href="../posts/blog-homepage.html" id="typography-1">Articles</a>
                            <a href="../about/bio.html" id="typography-1">About</a>
                        </div>
                    </div>
                </div>
                <div class="content box">
                    <div class="nested-grid-content">
                        <h1 class="blog-title">Setting up a Node.js and Express environment</h1>
                        <p id="typography-date" class="date">Feb 06, 2021</p>
                        <p id="typography-4">This post will explain the steps to setup a Node.js and Express environment.<br><br>
                            In my previous <a href="post-7-2021-13-jan-image-processing-api.html" id="typography-links">post</a>, which is a work in progress, I showed how to create an API.
                        </p>
                        <p id="typography-4">
                            Let's set up a Node.js and Express environment in order to develop a web application on a local machine.
                            We will use the <a href="https://nodejs.org/en/">Node</a> package called <a href="https://expressjs.com/">Express</a>; and a package called CORS which allows for communication across the web. Body-Parser (considered to be in the category of Middleware) will be used to parse the data that will be passed through routes on the server. 
                        </p>
                        <p id="typography-4">
                            <strong>Steps:</strong><br><br><strong>Step 1</strong>: Install Node.js on your computer, get it <a href="https://nodejs.org/en/download/">here</a>. <br><br>Node comes pre-installed with a standard package manager called <strong>npm</strong>.
                            Install packages with the package manager <strong>npm</strong>, from the command line. The general code to use is <code>npm install package_name</code>.
                            </strong><br><br><strong>Step 2</strong>: Install packages.<br><br>Use the <code>npm init</code> command to create a package.json file. 
                            <br>Install the body-parser package with <code>npm install body-parser</code>.
                            <br>Install express with <code>npm install express</code>.
                        </p>
                        <p id="typography-4">
                            </strong><br><strong>Step 3</strong>:<br><br>For website structure, see the docs <a href="https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/Dealing_with_files">here</a>. 
                            Create folders and files that are anticipated to be needed in the project. For example, create a file in the root directory (i.e., root folder) called server.js.
                            Create folders called 'images' (to hold the images), 'scripts' (for the js files), 'styles' (for the CSS files) in the root directory. Make in index.html file in the root directory.
                        </p>
                        <h2>Create a local server</h3>
                        <p id="typography-4">
                            In the server.js file, use the following code: <br><br>
                            Require Express (which we've already installed on the command line) to run server and routes
                        </p>    
                            <div id="codeBlock">
                                const express = require('express'); <br>
                            </div>
                            <br><p id="typography-4">Instantiate (create) an instance of the app , with express. Require bodyParser, which connect the packages (that were installed on the command line) to the app in the code with the .use() method.</p>
                            <div id="codeBlock">
                                const app = express(); <br>
                                const bodyParser = require('body-parser'); <br>
                            </div>
                            <br><p id="typography-4">Configure express (with the variable called 'app' which was defined above) to use body-parser as middle-ware so that we can parse our data. 
                            The middle-ware layer is used to handle a POST request in Express. </p>
                            <div id="codeBlock">
                                app.use(bodyParser.urlencoded({ extended: false })); <br>
                                app.use(bodyParser.json()); <br>
                            </div>
                            <br><p id="typography-4">Require Cors (which we've already installed on the command line) which let's the browser and server talk to each other, without any security interruptions.</p>
                            <div id="codeBlock">
                                const cors = require('cors'); <br>
                                app.use(cors()); <br>
                            </div>
                            <br><p id="typography-4">Initialize the main project folder. This code connects the server-side code to the client-side code (the browser code written in the files in the 'scripts' folder).</p>
                            <div id="codeBlock">
                                app.use(express.static('scripts')); <br>
                            </div>
                            <br><p id="typography-4">Setup the server. And map URL's to functions.</p>
                            <div id="codeBlock">
                                const port = 3000; <br><br>
                                const server = app.listen(port, listening); <br><br>
                                function listening() { <br>
                                    console.log(`server running on local host: ${port}`); <br>
                                } <br>
                            </div>
                    </div>
                </div>
                <div class="footer box">
                    <a href="https://github.com/sunshinescience">
                        <img class="social-media-logo" alt="Social media logo" src="../images/GitHub-Mark-Light-120px-plus.png"/>
                    </a>
                    <a href="https://https://www.linkedin.com/in/sunshine-abbott-3998777/">
                        <img class="social-media-logo" alt="Social media logo" src="../images/linkedin-4-64.png"/>
                    </a>
                    <a href="https://twitter.com/SunshineAbbott1">
                        <img class="social-media-logo" alt="Social media logo" src="../images/Twitter_Social_Icon_Circle_White.png"/>
                    </a>
                    <a href="https://www.facebook.com/sunshine.abbott">
                        <img class="social-media-logo" alt="Social media logo" src="../images/f_logo_RGB-White_512.png"/>
                    </a>
                </div>
            </div>      
    </body>
</html>